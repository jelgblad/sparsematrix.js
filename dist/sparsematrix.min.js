"use strict";(function(){var r=this,e={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.sparsematrix=e):r.sparsematrix=e,e.SparseBinaryMatrix=function(r){if(!Array.isArray(r))throw new TypeError("Array expected");for(var e=0;e<r.length;e++)if(r[e]<0)throw new RangeError("Dimensions are out of range");var i=[];this.get=function(e){var t=e;if(Array.isArray(e))t=this.getIndex(e);else if(t>=o(r))throw new RangeError("Index is out of range");var n=i.indexOf(t);return n>-1?!0:!1},this.set=function(e,t){var n=e;if(Array.isArray(e))n=this.getIndex(e);else if(n>=o(r))throw new RangeError("Index is out of range");var a=i.indexOf(n);a>-1?(t===!1||0===t)&&i.splice(a,1):(t===!0||1===t)&&i.push(n)},this.getIndices=function(){return i},this.getIndex=function(e){return n(r,e)},this.getCoordinates=function(e){return t(r,e)},this.getSize=function(){return o(r)},this.clear=function(){i=[]}},e.SparseMatrix=function(r){if(!Array.isArray(r))throw new TypeError("Array expected");for(var e=0;e<r.length;e++)if(r[e]<0)throw new RangeError("Dimensions are out of range");var i={};this.get=function(e,t){var n=e;if(Array.isArray(e))n=this.getIndex(e);else if(n>=o(r))throw new RangeError("Index is out of range");var a=i[n];return"object"==typeof a&&t&&(a=JSON.parse(JSON.stringify(a))),a},this.getAsNumber=function(r){var e=this.get(r);return void 0===e&&(e=0),e},this.set=function(e,t){var n=e;if(Array.isArray(e))n=this.getIndex(e);else if(n>=o(r))throw new RangeError("Index is out of range");t===!1||0===t||null===t?delete i[n]:i[n]=t},this.getIndex=function(e){return n(r,e)},this.getCoordinates=function(e){return t(r,e)},this.getSize=function(){return o(r)},this.clear=function(){i=[]}};var t=function(r,e){if(e>=o(r))throw new RangeError("Index is out of range");for(var t=[],n=1;n<r.length;n++){for(var i=r[n],a=n+1;a<r.length;a++)i*=r[a];var s=Math.floor(e/i);e=Math.floor(e%i),t.push(s)}return t.push(e),t},n=function(r,e){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length!==r.length)throw new Error("Wrong number of dimensions in vector ("+e.length+" expected "+r.length+")");for(var t=0;t<r.length;t++)if(e[t]>=r[t]||e[t]<0)throw new RangeError("Coordinates are out of range");for(var n=0,t=0;t<r.length-1;t++){for(var o=e[t],i=t+1;i<r.length;i++)o*=r[i];n+=o}return n+=e[r.length-1]},o=function(r){for(var e=r[0],t=1;t<r.length;t++)e*=r[t];return e}}).call(this);